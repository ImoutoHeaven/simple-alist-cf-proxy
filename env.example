# ===== Required Environment Variables =====

# ADDRESS (required)
# AList server address
# Example: ADDRESS=https://alist.example.com
ADDRESS=https://your-alist-server.com

# TOKEN (required)
# HMAC-SHA256 signing key for signature verification
# This must match the TOKEN used in alist-landing-worker
# Example: TOKEN=your-super-secret-token-here
TOKEN=your-hmac-token-here

# WORKER_ADDRESS (required)
# Current worker's address (used for redirect loop detection)
# Example: WORKER_ADDRESS=https://download.workers.dev
WORKER_ADDRESS=https://your-worker.workers.dev

# ===== Optional Environment Variables =====

# VERIFY_HEADER (optional)
# Custom verification header name to send to AList
# Leave empty if not needed
VERIFY_HEADER=

# VERIFY_SECRET (optional)
# Custom verification header value to send to AList
# Leave empty if not needed
VERIFY_SECRET=

# SIGN_CHECK (default: true)
# Enable or disable ?sign= parameter verification
# Set to "false" to skip sign verification (NOT RECOMMENDED)
SIGN_CHECK=true

# HASH_CHECK (default: true)
# Enable or disable ?hashSign= parameter verification
# Set to "false" to skip hashSign verification
HASH_CHECK=true

# IP_CHECK (default: true)
# Enable or disable ipSign parameter verification
# Set to "false" to skip ipSign verification
IP_CHECK=true

# IPV4_ONLY (default: true)
# Block IPv6 access and only allow IPv4
# Set to "false" to allow both IPv4 and IPv6
IPV4_ONLY=true

# ===== Path Blacklist/Whitelist Configuration =====

# BLACKLIST_PREFIX (optional)
# Comma-separated list of path prefixes to blacklist
# Paths matching these prefixes will be subject to BLACKLIST_ACTION
# Example: BLACKLIST_PREFIX=/private,/admin,/internal
BLACKLIST_PREFIX=

# BLACKLIST_ACTION (optional)
# Action to take for blacklisted paths. Valid values:
#   - block: Return 403 Forbidden, deny all access
#   - skip-sign: Skip all signature checks (sign, hashSign, ipSign)
#   - skip-hash: Only check sign, skip hashSign and ipSign
#   - skip-ip: Check sign and hashSign, skip ipSign only
#   - asis: Respect the SIGN_CHECK, HASH_CHECK, IP_CHECK settings
# Example: BLACKLIST_ACTION=block
BLACKLIST_ACTION=

# WHITELIST_PREFIX (optional)
# Comma-separated list of path prefixes to whitelist
# Paths matching these prefixes will be subject to WHITELIST_ACTION
# Example: WHITELIST_PREFIX=/public,/shared,/downloads
WHITELIST_PREFIX=

# WHITELIST_ACTION (optional)
# Action to take for whitelisted paths. Valid values: (same as BLACKLIST_ACTION)
#   - block: Return 403 Forbidden
#   - skip-sign: Skip all signature checks
#   - skip-hash: Only check sign, skip hashSign and ipSign
#   - skip-ip: Check sign and hashSign, skip ipSign only
#   - asis: Respect the CHECK settings
# Example: WHITELIST_ACTION=skip-ip
WHITELIST_ACTION=

# ===== Notes =====
#
# Signature Check Order: sign → hashSign → ipSign
# - Skipping earlier checks automatically skips later ones
#
# Priority: Blacklist > Whitelist > Default (CHECK flags)
# - When a path matches both blacklist and whitelist, blacklist takes precedence
#
# Activation Requirements:
# - Blacklist is ONLY active when BOTH BLACKLIST_PREFIX and BLACKLIST_ACTION are set
# - Whitelist is ONLY active when BOTH WHITELIST_PREFIX and WHITELIST_ACTION are set
